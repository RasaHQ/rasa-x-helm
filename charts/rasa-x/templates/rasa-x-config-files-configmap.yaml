apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: {{ template "rasa-x.rasa-x.configuration-files" . }}
  labels:
    {{ include "rasa-x.labels" . | nindent 4 }}
data:
  environments: |
{{- if or .Values.rasa.versions.rasaProduction.enabled .Values.rasa.versions.rasaProduction.external.enabled }}
    rasa:
      production:
        url: "{{- include "rasa.production.url" .}}"
        token: ${RASA_TOKEN}
{{- end }}
{{- if or .Values.rasa.versions.rasaWorker.enabled .Values.rasa.versions.rasaWorker.external.enabled }}
      worker:
        url: "{{- include "rasa.worker.url" .}}"
        token: ${RASA_TOKEN}
{{- end }}
